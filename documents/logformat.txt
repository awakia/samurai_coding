Play log format of the Rokkaku Conquest player

2013/08/19
Takashi Chikayama
The University of Tokyo

This document describes the format of log files generated by the
Rokkaku Conquest player and interepreted by the corresponding game
record visualizer.

1. Overall Structure

The log file consists of the following two parts.
  - Team information
  - Records of games in the tournament
  - Final result of the tournament

2. Team Information

The first part of a log file is information of teams.

The first line contains a positive integer N, which indicate the
number of teams participating in the contest.  N should be a multiple
of four.

The following N lines contain the team names, one in each line.  Teams
are alloted team numbers, starting from 0, in the order of the
appearnces of their names in the log file.

3. Tournament Record

Tounament records consist of records of rounds in the tournament, each
of which, in turn, consists of records games in the round.

All the data items in the tournament records are non-negative integers
represented as decimal numbers, separated by delimiters of spaces and
newlines.  Those characters following two consecutive slash ('/')
characters up to the end of the line are comments.

The first item in a tournament record is the number of rounds in the
tournament, R, which is followed by a number of records of games.

As one round has N/4 games, the number of games is R*N/4.

4. Game Record

The record of one game starts with the team list of four integers,
which are team numbers of the teams participating in the game.  In
what follows in the game record, teams are identified by 0, 1, 2, and
3, respectively, in the order of their appearances in this team list.

Then comes the maximum number of turns in the game.  Note that, the
game may not have this number of turns, because continental occupation
may terminate the game before this number of turns are made.

Then comes the description of the game field layout.  The two integers
indicating the width and the height of the field comes first.  Then
comes the number of gates in the field, which is followed by that
number of hexel position description.  A hexel position cosists of two
integers.

Then come the initial positions of the agents.  First comes the
position of the dog of team 0, and then three positions of the three
samurai of the team.  Positions of other teams follow, in the order of
team IDs.  As each team has 4 agents, 16 positions are described here
as 32 numbers.

Then follows a number of records of turns in the game.

5. Turn Record

The first item in a turn record is 0 or 1.  0 means that there are no
turns following, i.e., the game has ended by a continental occupation
or by time out condition, after the previous turn.  The game record
ends here if it is 0, that is, there are no more turns.

If the game continues, a turn record starts with records of valid
moves made by agents in this turn.  First comes the number of valid
moves, which is followed by a number of move descriptions.  A move
description cosists of description of two positions, meaning that an
agent at the first position moves to the second position.  The moves
here are those indicated by scripts of the teams and not those made by
syzygies.

Then comes the number of syzygies in this turn.  If it is non-zero,
descriptions of syzygies follow that number of times.  A syzygy is
described by a number of agents involved in the syzygy, followed by
that number of hexel positions on which agents are at the syzygy.

Following it is the descriptions of hexels that changed their owners.
First comes the number of such hexels, followed by that number of
owner change descriptions.  A owner change description consists of the
hexel position description of the hexel concerned and the ID of the
team which is the new owner of the hexel.  Note that owner changes due
to sieges are also listed here.

Then comes the description of agents frozen after this turn.  First
comes the number of agents frozen in this turn, followed by that
number of description of frozen agents.  A description of an agent
consists of two integers, team ID and agent ID, in this order.  Agent
with ID of 0 is the dog of the team; those with ID 1, 2, or 3 are
samurai.

Next is the descrition of sieges.  As the owner changes by sieges are
already described above, this siege description is only for
emphasizing sieges by the visualizer.  First comes the number of
sieges in this turn, followed by that number of descriptions of
sieges.  Description of a siege consists of the number of hexels
obtained by the siege, followed by that number of descriptions of the
hexels concerned.

The final item in a turn record is the description of transcontinental
occupations.  First comes the number of continental occupations,
followed by that number of descriptions of continental occupations.
Description of a continental occupation consists of the number of
hexels included in the continental occupation, followed by that number
of descriptions of the hexels concerned.

Note that those data on syzygies, frozen agents, sieges, and
transcontinental occupations are redundant, as they can be computed
from the initial positions and move data.  They are included in the
log only for ease of implementing tournament visualizers.

6. Final Results of the Tournament

The final part of the log file records the rankings of participating
teams with their scores in this tournament.  This information, again,
is redundant, as it can be computed based on the game records.  This
is provided for checking the scores maintained by visualizers agree
with that of the game manager.

